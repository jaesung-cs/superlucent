#version 450

layout (local_size_x = 256) in;

#include "fluid/particle.glsl"
#include "fluid/simulation_params.glsl"

void main()
{
  uint i = gl_GlobalInvocationID.x;
  if (i >= params.num_particles)
    return;
  
  particles[i].velocity.xyz = (particles[i].position.xyz - particles[i].prev_position.xyz) / params.dt;
}
